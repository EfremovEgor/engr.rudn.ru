{% extends 'components/base.html' %}
{% load static i18n %}
{% block content %}


<div class="uk-container" style="margin-top:50px;margin-bottom:50px">

  <a class="return-button" href="{% url 'pages:additional_professional_education' %}">
    ← {% trans "Назад к списку программ" %}
  </a>

  <div class="page-name">
    {{title}}
  </div>

  {% if item.department %}
    <h4 class="department_name">
      <a class="link-hover-underline red-link-hover-underline"
          href="{% url 'pages:department_item' item.department.abbreviation|get_url_department_abbreviation %}">
        {% if LANGUAGE_CODE == 'en' and item.department.name_en %}
              {{ item.department.name_en }}
        {% else %}
              {{ item.department.name }}
        {% endif %}
      </a>
    </h4>
  {% endif %}

  <div class="uk-child-width-1-1@s uk-child-width-1-2@m" uk-grid>
    {% if item.program_director %}
    <div>
      <h2 class="sub-heading">{% trans "Руководитель программы" %}</h2>
      <div class="employee-card-wrapper">
        <article style="background-color: transparent; border-radius: var(--base-border-radius);"
          class="uk-card-hover uk-card-default uk-comment uk-comment-primary uk-grid-match employee-card"
          role="comment">
          <header class="uk-comment-header" style="padding-bottom: 15px; border-bottom: 1px solid #e5e5e5">
            <div class="uk-grid-medium uk-flex-middle" uk-grid>
              <div class="uk-width-auto">
                <img class="uk-border-circle" src="{{item.program_director.related_profile.image.url}}" width="80"
                  height="80" />
              </div>
              <div class="uk-width-expand">
                <h3 class="uk-margin-remove">
                  <a class="uk-link-reset"
                    href="/profile/{{item.program_director.related_profile.id}}">{{item.program_director.related_profile.full_name}}</a>
                </h3>
                <ul class="uk-comment-meta uk-list-collapse uk-list uk-margin-remove-top">
                  <li><span> {{item.program_director.department_responsibilities.1}}</span></li>
                </ul>
              </div>
            </div>
          </header>
          <div class="uk-comment-body">
            <ul class="uk-list">
              {% if item.program_director.department_office %}
              <li>
                <h5 target="_blank" rel="noreferrer noopener" class="uk-link-heading card-link">
                  <span uk-icon="icon: location; ratio: 1"></span>
                  <span>{{item.program_director.department_office}}</span>
                </h5>
              </li>
              {% endif %} 
              {% if item.program_director.related_profile.phone_numbers %}
              <li>
                <h5>
                  {% for phone in item.program_director.related_profile.phone_numbers %}
                  <span uk-icon="icon: receiver; ratio: 1"></span>
                  <a href="tel:{{phone}}" class="uk-link-heading card-link">
                    {{phone.as_international}} <br />
                  </a>
                  {% endfor %}
                </h5>
              </li>
              {% endif %} 
              {% if item.program_director.related_profile.emails %}
              <li>
                <h5>
                  {% for email in item.program_director.related_profile.emails %}
                  <span uk-icon="icon: mail; ratio: 1"></span>
                  <a href="mailto:{{email}}" class="uk-link-heading card-link">{{email}}
                  </a>
                  {% endfor %}
                </h5>
              </li>
              {% endif %}
            </ul>
          </div>
        </article>
      </div>
    </div>
    {% endif %}
    <div>
      {% if item.contact_person %}
      <h2 class="sub-heading">{% trans "Контактное лицо" %}</h2>
      <div class="employee-card-wrapper">
        <article style="background-color: transparent; border-radius: var(--base-border-radius);"
          class="uk-card-hover uk-card-default uk-comment uk-comment-primary uk-grid-match employee-card"
          role="comment">
          <header class="uk-comment-header" style="padding-bottom: 15px; border-bottom: 1px solid #e5e5e5">
            <div class="uk-grid-medium uk-flex-middle" uk-grid>
              <div class="uk-width-auto">
                <img class="uk-border-circle" src="{{item.contact_person.related_profile.image.url}}" width="80"
                  height="80" />
              </div>
              <div class="uk-width-expand">
                <h3 class="uk-margin-remove">
                  <a class="uk-link-reset"
                    href="/profile/{{item.contact_person.related_profile.id}}">{{item.contact_person.related_profile.full_name}}</a>
                </h3>
                <ul class="uk-comment-meta uk-list-collapse uk-list uk-margin-remove-top">
                  {% for title in item.contact_person.department_responsibilities %}
                  <li><span>{{title}}</span></li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </header>
          <div class="uk-comment-body">
            <ul class="uk-list">
              {% if item.contact_person.department_office %}
              <li>
                <h5 target="_blank" rel="noreferrer noopener" class="uk-link-heading card-link">
                  <span uk-icon="icon: location; ratio: 1"></span>
                  <span>{{item.contact_person.department_office}}</span>
                </h5>
              </li>
              {% endif %} 
              {% if item.contact_person.related_profile.phone_numbers %}
              <li>
                <h5>
                  {% for phone in item.contact_person.related_profile.phone_numbers %}
                  <span uk-icon="icon: receiver; ratio: 1"></span>
                  <a href="tel:{{phone}}" class="uk-link-heading card-link">
                    {{phone.as_international}} <br />
                  </a>
                  {% endfor %}
                </h5>
              </li>
              {% endif %} 
              {% if item.contact_person.related_profile.emails %}
              <li>
                <h5>
                  {% for email in item.contact_person.related_profile.emails %}
                  <span uk-icon="icon: mail; ratio: 1"></span>
                  <a href="mailto:{{email}}" class="uk-link-heading card-link">{{email}}
                  </a>
                  {% endfor %}
                </h5>
              </li>
              {% endif %}
            </ul>
          </div>
        </article>
      </div>
      {% endif %}
    </div>
  </div>
  
  <h2 class="sub-heading">{% trans "О программе" %}</h2>

  <div class="uk-section uk-section-muted uk-padding-large uk-margin-medium-top" style="border-radius: var(--base-border-radius);">
      <div class="uk-grid-divider uk-child-width-1-2@s" uk-grid>
          <div>
              <dl class="uk-description-list">
                  <dt>Объем:</dt>
                  <dd>{{ item.volume }}</dd>
                  <dt>Форма обучения:</dt>
                  <dd>{{ item.study_mode }}</dd>
              </dl>
          </div>
          <div>
              <dl class="uk-description-list">
                  <dt>Язык обучения:</dt>
                  <dd>{{ item.language }}</dd>
                  <dt>Стоимость:</dt>
                  <dd>{{ item.cost|floatformat:"0" }} р.</dd> {# floatformat:"0" removes decimals #}
              </dl>
          </div>
      </div>
  </div>

  <div class="profile_content" style="margin-top: 50px;">
    {% if LANGUAGE_CODE == "en" and item.information_en %}
      {{ item.information_en|safe }}
    {% else %}
      {{ item.information|safe }}
    {% endif %}
  </div>

</div>
{% endblock %}